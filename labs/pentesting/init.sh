#!/bin/bash

# Configuración del laboratorio de pentesting
LAB_DIR="/home/kali/labs/pentesting"
TARGET_IP="172.17.0.10"  # IP de la máquina objetivo

# Crear estructura de archivos
mkdir -p $LAB_DIR/{recon,exploit,post}

# Configurar máquina vulnerable
docker run -d \
  --name vulnerable-webapp \
  --network lab-network \
  -p 8080:80 \
  vulnerables/web-dvwa

# Crear archivo de objetivos
echo "$TARGET_IP" > $LAB_DIR/targets.txt

# Configurar herramientas específicas
cd $LAB_DIR/tools
git clone https://github.com/danielmiessler/SecLists.git

# Crear guía del laboratorio
cat > $LAB_DIR/README.md << EOF
# Laboratorio de Pentesting

Objetivos:
1. Realizar reconocimiento de la máquina objetivo
2. Identificar vulnerabilidades
3. Explotar vulnerabilidades encontradas
4. Documentar hallazgos

Comandos útiles:
- nmap -sV -sC $TARGET_IP
- dirb http://$TARGET_IP
- sqlmap -u "http://$TARGET_IP/vulnerable.php?id=1"

Reporte:
Documenta tus hallazgos en /home/kali/labs/pentesting/report.md
EOF